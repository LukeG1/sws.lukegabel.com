{% extends "layout.html" %}
{% block content %}
<h1 class="display-4">{{ title }}</h1>



<style>
    hr {
        margin-top: .5rem;
        margin-bottom: .5rem;
        border: 0;
        border-top: 3px solid rgba(23, 83, 161, 0.596);
    }
</style>



<form method="POST" action="">
    {{ form.hidden_tag() }}
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Start a new comp!</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">


                    {{ form.code(class="form-control form-control-lg form-space", placeholder="Join Code...", id="join_code") }}


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    {{ form.submit(class="btn btn-primary") }}
                </div>

            </div>
        </div>
    </div>
</form>



<script>
    document.addEventListener("DOMContentLoaded", function () {
        $('#exampleModalCenter').modal('show')


        var join_field = document.getElementById("join_code")

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);

        var join_code = urlParams.get('code')
        
        if(join_code.length > 0){
          console.log(join_code)
          join_field.value = join_code
        }
    });
    

</script>




{% endblock content %}